(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{829:function(e,t,a){"use strict";var n=a(0),i=a.n(n),l=a(673);t.a=Object(l.a)(function(e){var t=function(e){return{color:e,"& span":{background:e}}};return{root:{width:"100%",border:"1px solid rgba(221,221,221,1)","& td, & tr":{height:"54px",border:"1px solid rgba(221,221,221,1)",textAlign:"left"},"& td":{minWidth:"60px"}},name:{background:"rgba(242,243,247,1)","padding-left":"20px"},value:{"padding-left":"20px","& .origin":t("#F88B08"),"& .green":t("#02B583"),"& .circle":{display:"flex","align-items":"center","& span":{"margin-right":"5px",display:"inline-block",width:"8px",height:"8px","border-radius":"50%"}}}}})(function(e){var t=e.column,a=e.classes;return i.a.createElement("table",{className:a.root},i.a.createElement("tbody",null,t.map(function(e,t){return i.a.createElement("tr",{key:t},e.map(function(e,t){var n=e.name,l=e.value,s=e.colSpan;return i.a.createElement(i.a.Fragment,{key:t},i.a.createElement("td",{key:"".concat(t,"-name"),className:a.name},n),i.a.createElement("td",{key:"".concat(t,"-value"),colSpan:s,className:a.value},l))}))})))})},917:function(e,t){},959:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAARCAYAAADQWvz5AAABn0lEQVQ4T63TP0gcQRgF8Pf2WHctLCwkRRqNHjYqqULKSBCEYCTFKkFRQZRTkoiEgE2KWNpYBO6UIASr6IEgNnZCKgv/gJbnv1ZDINi4K3f7ZBYOzLF7eOB0M3zz430fM8QjLRqnPh9sCuoDEO1rWCK4deM5/dFFN++HIEcUarcGBLT4EtKq77lWGZKEdDDgnmTP9BbCqEVsZp5xtRrsrPttJAq+5/I/KNvlXAY2Li0iFwpTxRCdn9I8jcNW/qhheid4EgutvHaurv/hisQPCZMW0JFpZaESyp1qTsDQ7H7wLhYyrS0V1C8LwyS24lqLEOJLWELP58PgOhGqNpP7yIc0DxJnZBIZKHuhNyjhq53C+4lmnpuzSsScVYUiJMQagSMJT+0UXhVLGCy3Y5KUUydCiy+cdoNYxDj/YqPUiF8AukHIzOQ+kpjITqF94bnzm8RMpoVrpnB5T3axEfNWCutTzTysnF9iorkm5+JbN4sPfd1x0C2InxKOH4qYOhKdEMZ8z62LXraT9z+S7IVU26clJWk78NzvtV2sEvfRoDui8/QSbQm+4gAAAABJRU5ErkJggg=="},960:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAARCAYAAADQWvz5AAABVklEQVQ4T61TsUoDQRB9b+8SG39BrIQIET9BxCtUSDoLKwsrUSzsBYONjQjRziKVXRoP1OYaP0GMELAWgpDGIGhytyN7yd3FiEcObppl2bdv5s28IXIKGp6+69wQsg0wvE8fIiQbdsXbDT8OXMcXylEB6sUX8WyxFtLIfAavNuloyKIILuyqV4iIJPpsQIWql1rZwHX+4PMnAng6lCPHUUXyfD6H8scbWdPjUk1Fk/i4IgCPI/BKQnR5B2IeGjUsHTRJyqin5vyFT5WmW/V7CDZGCZ5Ia53l/U7mHiVE8inCK9XtnnC19pVKNN6DWFqrfq219JQUz7i89x5hhj1KwuATaaRjnoyPphr/BD7/8QcSlGZQDLIY8ht9y6LVjqX5rtMD5EGg2sZHCjhMWxEN1I2PCF0CuWlXvNlQmn+7tgPFLRGq6Rc2NK+QaNoVr5Fx2/9PkxvRD7HW7hLWAq8mAAAAAElFTkSuQmCC"},961:function(e,t,a){e.exports=a.p+"static/media/failed.pngZh.9e0e877b.png"},962:function(e,t,a){e.exports=a.p+"static/media/failed.pngEn.436c2afd.png"},983:function(e,t,a){"use strict";a.r(t);a(325);var n=a(222),i=a(2),l=a.n(i),s=(a(326),a(167)),r=a(3),c=a(29),o=a(30),p=a(32),u=a(31),m=a(33),d=(a(913),a(965)),g=a(0),v=a.n(g),f=a(673),h=a(966),E=(a(957),a(958)),y=a(34),b=a(829),S=a(62),x=function(e){return{col:{maxWidth:600,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",cursor:"pointer",WebkitLineClamp:3,display:"inherit"},root:{margin:"20px",padding:"26px 20px",background:"#fff"},title:{fontSize:"20px",color:"#33353D"},tabelList:{"& table":{"& td":{minWidth:"120px",maxWidth:"300px"}}},popup_content:{position:"fixed",top:0,width:"100vw",height:"100%",background:"rgba(0,0,0,0.5)",color:"#33353D",zIndex:90,"& .fix_popup":{position:"absolute",background:"#fff",width:"660px",height:"680px",left:"50%",top:"50%",borderRadius:"4px",transform:"translate(-50%,-50%)",padding:"24px"},"& .head":{display:"flex",justifyContent:"space-between",fontSize:"16px","span:last-child":{fontSize:"14px",color:"#08ABF8",cursor:"pointer"}},"& .content":{height:"calc(100% - 40px)",margin:"14px 0",overflowY:"auto",fontSize:"14px","& img":{marginBottom:"10px"},"& .videos":{width:"592px",overflow:"hidden","& .videocter":{width:"592px",height:"271px",marginBottom:"10px","& .vjs-paused":{"& .vjs-big-play-button":{display:"block"}}}}}},stepList:{"& .ant-steps-item":{flex:"0 0 20%"},"& .noexist":{"& .ant-steps-item-content":{"& .ant-steps-item-title":{color:"#999BA1 !important",fontWeight:"normal"}}}},stepStatu:{"& span":{width:"8px",height:"8px",display:"inline-block",marginRight:"5px",borderRadius:"50%",backgroundColor:"red"}}}},L=d.a.Step,A=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(p.a)(this,Object(u.a)(t).call(this,e))).getId=function(e){return e.match.params.id},a.getData=function(){var e=Object(r.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=a.props.locale,t?a.props.queryDetail({params:{id:t,detailLevel:1}}):(s.a.config({maxCount:1}),s.a.error("zh"===n?"\u83b7\u53d6\u6570\u636e\u5931\u8d25":"Failure to obtain data"));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.play=function(e){for(var t=document.getElementsByTagName("video"),a=0;a<t.length;a++)e!==a&&t[a].pause()},a.state={expoName:"",detail_popup:!1},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getData(this.getId(this.props)),this.props.getEventLevelList(),this.props.getEventStatusList(),this.props.getAppCodeList(),this.props.getEventTypeList()}},{key:"componentWillReceiveProps",value:function(e){var t=this.getId(this.props),a=this.getId(e);t!==a&&this.getData(a)}},{key:"componentDidUpdate",value:function(){if(this.props.detail.videos)for(var e=document.getElementsByTagName("video"),t=0;t<e.length;t++)h.a.addLanguage("zh-CN",E),Object(h.a)("myVideo"+t)}},{key:"componentWillUnmount",value:function(){this.props.setDetail({})}},{key:"render",value:function(){var e=this,t=this.props,i=t.classes,l=t.detail,s=t.eventLevelList,r=t.eventStatusList,c=t.eventTypeList,o=t.appCodeList,p=t.locale,u=s.find(function(e){return e.code===l.level})||{},m=r.find(function(e){return e.code===l.status})||{},g=c.find(function(e){return e.name===l.typeName})||{},f=o.find(function(e){return e.name===l.appName})||{},h=l.forwardLog,E=JSON.parse(l.images||"[]")||[],y=JSON.parse(l.videos||"[]")||[],A=this.state.detail_popup,N=r.find(function(e){return e.code===l.status})||{},w=l.list||[],T=(5!==N.code?r.length&&r.slice(0,5).map(function(e,t){var a=w.find(function(t){return e.code===t.currStatus}),n=new Date(+new Date(new Date(a&&a.logTime).toJSON())+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"");return{status:"zh"===p?e.label+"\u73af\u8282":e.english,logTime:a?n:null,overtime:a?a.overtime:null}}):r.length&&w.map(function(e,t){var a=new Date(+new Date(new Date(w[t].logTime).toJSON())+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"");return{status:"zh"===p?r[e.currStatus].label+"\u73af\u8282":r[e.currStatus].english,logTime:a,overtime:e.overtime}}))||[],k=[];h&&h.map(function(e,t){k.push({fwResult:e.fwResult,targets:e.targets,fwType:e.fwType,fwTime:e.fwTime})});var C=window.screen.width,D=[[{name:v.a.createElement(S.a,{id:"event.eventID",defaultMessage:"Event ID"}),value:v.a.createElement(n.a,{placement:"topLeft",trigger:"click",title:l.traceId},v.a.createElement("span",{className:"".concat(i.col),style:{maxWidth:C<=1280?"165px":"210px"}},l.traceId))},{name:v.a.createElement(S.a,{id:"event.sourceSystem",defaultMessage:"Source System"}),value:"zh"===p?f.name:f.english||"111"},{name:v.a.createElement(S.a,{id:"event.eventType",defaultMessage:"Event Type"}),value:"zh"===p?g.name:g.english||"111"}],[{name:v.a.createElement(S.a,{id:"event.eventLevel",defaultMessage:"Event Level"}),value:v.a.createElement("div",{className:"circle"},v.a.createElement("span",{style:{background:u.color}}),"zh"===p?u.label:u.english)},{name:v.a.createElement(S.a,{id:"event.eventTitle",defaultMessage:"Event Title"}),value:l.title},{name:v.a.createElement(S.a,{id:"event.pushStatu",defaultMessage:"Push Status (SMS)"}),value:k.map(function(e,t){if(0===e.fwType)return"SUCCESS"===e.fwResult?v.a.createElement("div",{className:"circle",key:t},v.a.createElement("span",{style:{background:"rgb(2, 181, 131)"}}),"zh"===p?"\u6210\u529f":"SUCCESS"):v.a.createElement("div",{className:"circle",key:t},v.a.createElement("span",{style:{background:"red"}}),"zh"===p?"\u5931\u8d25":"FAIL")})}],[{name:v.a.createElement(S.a,{id:"event.occurrenceTime",defaultMessage:"Occurrence Time"}),value:l.occurTime},{name:v.a.createElement(S.a,{id:"event.receivingTime",defaultMessage:"Receiving Time"}),value:l.logTime||""},{name:v.a.createElement(S.a,{id:"event.pushStatuPortal",defaultMessage:"Push Status (Portal)"}),value:k.map(function(e,t){if(1===e.fwType)return"SUCCESS"===e.fwResult?v.a.createElement("div",{className:"circle",key:t},v.a.createElement("span",{style:{background:"rgb(2, 181, 131)"}}),"zh"===p?"\u6210\u529f":"SUCCESS"):v.a.createElement("div",{className:"circle",key:t},v.a.createElement("span",{style:{background:"red"}}),"zh"===p?"\u5931\u8d25":"FAIL")})}],[{name:v.a.createElement(S.a,{id:"event.eventHandlingStatus",defaultMessage:"Timeout"}),value:"zh"===p?1===l.overtime?"\u662f":"\u5426":1===l.overtime?"Yes":"No",colSpan:""},{name:v.a.createElement(S.a,{id:"event.processingLink",defaultMessage:"Processing Step"}),value:v.a.createElement("div",{className:"circle"},v.a.createElement("span",{style:{background:m.color}}),"zh"===p?m.label:m.english),colSpan:""},{name:v.a.createElement(S.a,{id:"event.pushTime",defaultMessage:"Push Time"}),value:k.map(function(e,t){if(1===e.fwType)return e.fwTime})}],[{name:v.a.createElement(S.a,{id:"event.notificationObject",defaultMessage:"Notification Object"}),value:k.map(function(e){return e}).length?k[0].targets:null,colSpan:"5"}],[{name:v.a.createElement(S.a,{id:"event.describe",defaultMessage:"Description"}),value:v.a.createElement("div",null,l.message,l.images&&v.a.createElement("img",{src:a(959),alt:""}),l.videos&&v.a.createElement("img",{src:a(960),alt:""}),(l.images||l.videos)&&v.a.createElement("span",{className:x.popup,style:{color:"#08ABF8",marginLeft:"10px",cursor:"pointer"},onClick:function(){e.setState({detail_popup:!0})}},v.a.createElement(S.a,{id:"evnet.viewDetails",defaultMessage:"View Details"})," ",">")),colSpan:"5"}]],I={autoplay:!0,language:"zh-CN",controls:!0,preload:"auto",errorDisplay:!0,width:500,height:300,userActions:{hotkeys:!0}};return v.a.createElement("div",null,v.a.createElement("div",{className:i.root},v.a.createElement("h3",{className:i.title},v.a.createElement(S.a,{id:"event.processingprogress",defaultMessage:"Processing Progress"})),v.a.createElement("div",{className:i.tabelList},w.length?v.a.createElement(d.a,{progressDot:!0,current:w[w.length-1].currStatus,labelPlacement:"vertical",className:i.stepList},T.map(function(e,t){return v.a.createElement(L,{className:e.logTime?"":"noexist",title:e.status,description:e.logTime?v.a.createElement("div",{className:i.stepStatu},v.a.createElement("p",null,0===e.overtime?v.a.createElement("span",{style:{background:"#02B583"}}):v.a.createElement("span",{style:{background:"#FC5B5B"}}),0===e.overtime?"zh"===p?"\u6b63\u5e38\u5904\u7406":"Success":"zh"===p?"\u8d85\u65f6\u5904\u7406":"Fail"),v.a.createElement("p",null,e.logTime)):null,key:t})})):null)),v.a.createElement("div",{className:i.root},v.a.createElement("h3",{className:i.title},v.a.createElement(S.a,{id:"order.basicInformation",defaultMessage:"Basic information"})),v.a.createElement("div",{className:i.tabelList},v.a.createElement(b.a,{column:D}))),A?v.a.createElement("div",{className:i.popup_content},v.a.createElement("div",{className:"fix_popup"},v.a.createElement("div",{className:"head"},v.a.createElement("span",null,v.a.createElement(S.a,{id:"event.describeDetails",defaultMessage:"Description details"})),v.a.createElement("span",{style:{color:"#08ABF8",cursor:"pointer"},onClick:function(){e.setState({detail_popup:!1})}},v.a.createElement(S.a,{id:"event.closingSwitch",defaultMessage:"Close"}))),v.a.createElement("div",{className:"content"},v.a.createElement("p",null,l.message),E.length?E.map(function(e,t){return v.a.createElement("img",{src:e,alt:"",width:"592",height:"271",key:t,style:{display:"block",background:"url(".concat(a("zh"===p?961:962),") center no-repeat"),backgroundSize:"500px 250px"}})}):null,v.a.createElement("div",{className:"videos"},y.length?y.map(function(t,a){return v.a.createElement("div",{className:"videocter",key:a},v.a.createElement("video",Object.assign({id:"myVideo"+a,className:"video-js vjs-big-play-centered",controls:!0,preload:"auto","data-setup":"{}",style:{width:"100%",height:"100%"},poster:t.images,onPlay:e.play.bind(e,a)},I),v.a.createElement("source",{src:t.url})))}):null)))):null)}}]),t}(v.a.Component);t.default=Object(f.a)(x)(Object(y.b)(function(e){var t=e.event;return{detail:t.detail,eventLevelList:t.eventLevelList,eventStatusList:t.eventStatusList,eventTypeList:t.eventTypeList,appCodeList:t.appCodeList,locale:e.intl.locale}},function(e){var t=e.event,a=t.queryDetail,n=t.getEventLevelList,i=t.getEventTypeList;return{queryDetail:a,getAppCodeList:t.getAppCodeList,getEventLevelList:n,getEventTypeList:i,getEventStatusList:t.getEventStatusList,setDetail:t.setDetail}})(A))}}]);
//# sourceMappingURL=eventQueryDetail.1f3c7965.chunk.js.map