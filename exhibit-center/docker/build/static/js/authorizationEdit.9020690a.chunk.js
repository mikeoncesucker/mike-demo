(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{976:function(e,t,a){"use strict";a.r(t);a(322);var n=a(676),o=(a(786),a(791)),i=(a(765),a(767)),l=(a(766),a(768)),r=(a(787),a(790)),s=(a(681),a(753)),c=a(29),m=a(30),d=a(32),u=a(31),f=a(33),p=a(0),g=a.n(p),E=a(673),b=a(34),h=a(62),I=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).showModal=function(){var e=a.props.form.getFieldsValue(),t=a.props.roleInfo,n=!1;for(var o in e)e[o]!==t[o]&&(n=!0,a.setState({visible:!0}));n||a.goBack()},a.hideModal=function(){a.setState({visible:!1})},a.goBack=function(){var e=a.props,t=e.history,n=e.location;t.push("./",n.state)},a.handleSubmit=function(e){e.preventDefault();var t=a.props.location;a.props.form.validateFields(function(e,n){if(!e){var o={description:n.description,name:n.name};if(t.pathname.indexOf("edit")>0)(0,a.props.editRole)({identifier:sessionStorage.getItem("roleIdentifier"),id:sessionStorage.getItem("roleId"),params:o,cb:function(){a.goBack()}});else(0,a.props.addRole)({identifier:sessionStorage.getItem("roleIdentifier"),params:o,cb:function(){a.goBack()}})}})},a.state={formData:{name:"",description:""}},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.queryRoleById,a=e.location;a.pathname.indexOf("edit")>0&&(a.state&&sessionStorage.setItem("roleId",a.state.id),t({identifier:sessionStorage.getItem("roleIdentifier"),id:sessionStorage.getItem("roleId"),cb:null}))}},{key:"componentWillUnmount",value:function(){(0,this.props.resetRoleInfos)()}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.form,c=e.roleInfo,m=e.location,d=a.getFieldDecorator,u=[];return m.state&&(u=Object.assign({},c)),g.a.createElement("div",{className:t.root},g.a.createElement("p",null,g.a.createElement(h.a,{id:"role.authorizeBusinessSystem",defaultMessage:"Authorize business system"})),g.a.createElement("p",null,sessionStorage.getItem("sysName")," / ",g.a.createElement("span",null,sessionStorage.getItem("path"))),g.a.createElement("br",null),g.a.createElement("p",{className:t.title},g.a.createElement(h.a,{id:"role.baseInfo",defaultMessage:"Basic information"})),g.a.createElement(r.a,{onSubmit:this.handleSubmit,className:"login-form"},g.a.createElement(i.a,{gutter:48},g.a.createElement(l.a,{span:10},g.a.createElement(r.a.Item,{label:g.a.createElement(h.a,{id:"role.roleName",defaultMessage:"RoleName"})},d("name",{initialValue:u.name,rules:[{max:32,message:g.a.createElement(h.a,{id:"role.nameVerify",defaultMessage:"Role name max length is 32"})},{required:!0,whitespace:!0,message:g.a.createElement(h.a,{id:"role.inputRoleName",defaultMessage:"Please enter role name"})}]})(g.a.createElement(s.a,null)))),g.a.createElement(l.a,{span:10},g.a.createElement(r.a.Item,{label:g.a.createElement(h.a,{id:"role.Description",defaultMessage:"Role desciption"})},d("description",{initialValue:u.description,rules:[{max:100,message:g.a.createElement(h.a,{id:"role.descVerify",defaultMessage:"Role description max length is 100"})},{required:!1,message:g.a.createElement(h.a,{id:"role.inputRoleDescription",defaultMessage:"please input inputRoleDescription"})}]})(g.a.createElement(s.a.TextArea,{rows:3}))))),g.a.createElement(r.a.Item,{className:t.button},g.a.createElement(o.a,{title:g.a.createElement(h.a,{id:"role.confirmExitEditing",defaultMessage:"Confirm to exit editing?"}),visible:this.state.visible,onOk:this.goBack,onCancel:this.hideModal,okText:g.a.createElement(h.a,{id:"role.confirm",defaultMessage:"Confirm"}),cancelText:g.a.createElement(h.a,{id:"role.cancel",defaultMessage:"Cancal"})},g.a.createElement("p",null,g.a.createElement(h.a,{id:"role.exitMsg",defaultMessage:"All data will remain unchanged after exiting"}))),g.a.createElement(n.a,{onClick:this.showModal},g.a.createElement(h.a,{id:"role.cancel",defaultMessage:"Cancal"})),g.a.createElement(n.a,{type:"primary",htmlType:"submit"},g.a.createElement(h.a,{id:"role.confirm",defaultMessage:"Confirm"})))))}}]),t}(g.a.Component);t.default=r.a.create()(Object(E.a)(function(e){return{root:{margin:"20px",backgroundColor:"#FFFFFF",padding:"30px 20px"},title:{fontSize:"16px",color:"#33353D"},button:{"& button":{float:"right",marginLeft:"12px"}}}})(Object(b.b)(function(e){return{roleInfo:e.resource_and_role.roleInfo}},function(e){var t=e.resource_and_role;return{addRole:t.addRole,editRole:t.editRole,queryRoleById:t.queryRoleById,resetRoleInfos:t.resetRoleInfos}})(I)))}}]);
//# sourceMappingURL=authorizationEdit.9020690a.chunk.js.map