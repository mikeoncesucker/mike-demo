(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{950:function(e,t,a){"use strict";a.r(t);a(774);var n=a(777),i=(a(807),a(823)),c=(a(174),a(16)),o=(a(175),a(39)),s=a(26),r=a(27),l=a(29),u=a(28),m=a(30),d=(a(769),a(771)),p=a(0),g=a(55),h=(a(768),a(772)),f=a(759),N=a(798),b=a.n(N),v=a(112),_=d.a.confirm,E=["#02B583","#08ABF8","#FFC000","#FC5B5B"],y=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).delete=function(e,t){t.stopPropagation();var n=a.props,i=n.getUnreadNoticeList,c=n.putDeleteById,o=n.getData,s=n.intl,r=s.formatMessage;_({title:"".concat(r(v.a.confirm_delete_notice),"?"),okText:r(v.a.btn_sure),cancelText:r(v.a.btn_cancel),onOk:function(){c({id:e,cb:function(){o(),i({language:"zh"===s.locale?"chinese":"english",cb:null})}})},onCancel:function(){}})},a.toDetail=function(e,t){t.preventDefault(),a.props.history.push({pathname:"notice/detail",state:{id:e}})},a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.appCodeList,n=e.intl,i=n.formatMessage,c=a.find(function(e){return e.code===t.appCode})||{};return p.createElement("div",{onClick:this.toDetail.bind(this,t.id),className:b.a.notice_item},p.createElement("div",{className:"haveRead"===t.status?b.a.notice_item_title_readed:b.a.notice_item_title},p.createElement(h.a,{color:E[t.level]})," ",t.title||"",p.createElement(f.a,{image:t.images,video:t.videos})),p.createElement("div",{className:b.a.notice_item_desc},p.createElement("div",{className:"haveRead"===t.status?"":b.a.item_warn},t.message||""),p.createElement("div",{className:b.a.item_source},i(v.a.origin),": ","zh"===n.locale?c.name:c.english),p.createElement("div",{className:b.a.item_create_at},t.occurTime),p.createElement("div",{className:b.a.delete,onClick:this.delete.bind(this,t.id)},i(v.a.delete))))}}]),t}(p.PureComponent),C=Object(g.b)(function(e){return{appCodeList:e.search.appCodeList}},function(e){return{putDeleteById:e.notice.putDeleteById,getUnreadNoticeList:e.common.getUnreadNoticeList}})(y),k=a(767),O=a(766),j=a(139),L=a(34),D=a.n(L),w=a(4),M=a.n(w),R=a(40),B=Object(R.c)({message:{id:"message",defaultMessage:"Message"},msg_list:{id:"msg_list",defaultMessage:"Message List"},notice_null:{id:"notice_null",defaultMessage:"No news to clear"}}),T=d.a.confirm,z=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).getData=function(){var e=a.props.getNoticeList,t=a.state.pageNumber;e({query:{language:"zh"===D.a.get("local_language")?"chinese":"english",pageNumber:t,pageSize:5},cb:function(e,t){}})},a.onChange=function(e){a.setState({pageNumber:e},function(){a.getData()})},a.resetNoticeRead=function(){(0,a.props.resetNoticeRead)({cb:function(){a.getData()}})},a.clearList=function(){var e=a.props,t=e.deleteNotice,n=e.notice,i=e.intl.formatMessage;n.count?T({title:"".concat(i(v.a.confirm_reset_notice),"?"),okText:i(v.a.btn_sure),cancelText:i(v.a.btn_cancel),onOk:function(){t({cb:null})},onCancel:function(){}}):o.a.warn(i(B.notice_null))},a.state={pageNumber:1},a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.query,a=e.resetQuerys;this.onChange(t.pageNumber||this.state.pageNumber),a()}},{key:"componentWillUnmount",value:function(){(0,this.props.resetNoticeLists)()}},{key:"componentWillReceiveProps",value:function(e){if(e){var t=e.notice.noticeEntities||[],a=e.notice.count;!t.length&&a&&this.onChange(this.state.pageNumber-1)}}},{key:"render",value:function(){var e=this,t=this.props,a=t.notice,o=t.history,s=t.intl,r=s.formatMessage;return p.createElement(n.a,{className:"layout"},p.createElement(O.a,{history:o,intl:s,show:!0}),p.createElement("div",{className:b.a.noticeContent},p.createElement(k.a,{name:B.message,title:B.msg_list,intl:s}),p.createElement("div",{className:b.a.result},p.createElement("div",{className:b.a.content},p.createElement("div",{className:b.a.readed_delete},p.createElement("span",{onClick:this.resetNoticeRead},p.createElement(c.a,{type:"check",className:b.a.font}),r(v.a.readed)),p.createElement("span",{onClick:this.clearList.bind(this)},p.createElement("span",{className:M()("iconfont icon-lajitong",b.a.font)}),r(v.a.clear))),(a.noticeEntities||[]).map(function(t,a){return p.createElement(C,{data:t,key:a,getData:e.getData,history:o,intl:s})}))),a.count?p.createElement("div",{className:b.a.page},p.createElement(i.a,{total:a&&a.count,showTotal:function(e){return"".concat(r(v.a.total)," ").concat(e," ").concat(r(v.a.count))},onChange:this.onChange,current:this.state.pageNumber,pageSize:5})):null),p.createElement(j.a,{intl:s,bg:"#213571"}))}}]),t}(p.Component);t.default=Object(g.b)(function(e){var t=e.notice;return{notice:t.notice,query:t.query}},function(e){var t=e.common.resetNoticeRead,a=e.notice;return{getNoticeList:a.getNoticeList,deleteNotice:a.deleteNotice,resetNoticeRead:t,resetNoticeLists:a.resetNoticeLists,resetQuerys:e.search.resetQuerys}})(Object(R.d)(z))}}]);
//# sourceMappingURL=notice.2351d88d.chunk.js.map